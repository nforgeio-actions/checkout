# Pulls the neonFORGE GitHub repos to a JOBRUNNER.
#
# This currently manages the following neonFORGE repos:
#
#   neonCLOUD           - private/enterprise code including deployment scripts
#   neonKUBE            - public neonKUBE related code
#   neonLIBRARY         - public neonLIBRARY related code
#   nforgeio.github.io  - public neonLIBRARY code documentation (doc.neonforge.com)
#   cadence-samples     - public Cadence sample apps
#   temporal-samples    - public Temporal sample apps

name: neon-pull-repos
description: Checks out the neonCLOUD, neonKUBE, and neonLIBRARY repos
inputs:
  branch:
    description: Optionally specifies the branch or tag (defaults to "master")
    required: false
    default: master
runs:
  using: composite
  steps:
    - shell: pwsh
      run: |
      
        # Checks out the named repo, resetting it first to clear
        # any uncomitted changes.
        function Checkout
        {
            [CmdletBinding()]
            param (
                [Parameter(Position=0, Mandatory=1)]
                [string]$repoName
            )
            
            Push-Location "${{ NF_REPOS }}\$repoName"
            git reset --hard
            git checkout ${{ branch }}
            Pop-Location
        }
        
        # Checkout the repos
        
        Checkout neonCLOUD
        Checkout neonKUBE
        Checkout neonLIBRARY
        Checkout nforgeio.github.io
        Checkout cadence-samples
        Checkout temporal-samples
